<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8"/>
        <title>Fleet Admin</title>
        <style>
            body {font-family: Arial, Helvetica, sans-serif;}
            .container{display : flex;gap:20px ;}
            .sidebar{width:250px;border-right: 1px solid #ccc; padding-right: 10px;}
            .main{flex:1;}
            .navbar{margin-bottom: 15px;}
            .cards{
                border: 1px solid #ccc;
                padding: 10px;
                width: 30px;
                box-sizing: border-box;
            }
            img{width: 100;height: 120px;object-fit: cover;}
            button{margin-right: 5px;margin-top: 5px;}
        </style>
    </head>
    <body>
        <!---navbar--->
        <div class="navbar">
            Category:
            <select id="filterCategory">
                <option value="All">All</option>
                <option value="Auto">Auto</option>
                <option value="Car">Car</option>
                <option value="Truck">Truck</option>
                <option value="Bus">Bus</option>
            </select>
            Availability:
            <select id="filterAvail">
                <option value="All">All</option>
                <option value="Available">Available</option>
                <option value="Unavailable">Unavailable</option>
            </select>
            <button id="clearfilter">clearfilter</button>
        </div>
        <div class="container">
            <div class ="sidebar">
                <h3>Add Fleet</h3>
                <input type="text" id="regNo" placeholder="regNo of vehicle"/><br/><br/>
                <select id="Category">
                  <option value="All">All</option>
                <option value="Auto">Auto</option>
                <option value="Car">Car</option>
                <option value="Truck">Truck</option>
                <option value="Bus">Bus</option>
                </select><br/><br/> 
                <input type="text" id="driver" placeholder="driver Name"/><br/><br/>
                <select id="isAvailable">
                     <option value="Available">Available</option>
                <option value="Unavailable">Unavailable</option>
                </select><br/><br/>
                <button id="addFleet">Add Fleet</button>


            </div>
        <div class="main">
            <h3>Fleet List</h3>
            <div id="cardsContainer" class="cards"></div>
        </div>
        </div>
        <script>
            const vehicle_img ="https://coding-platform.s3.amazonaws.com/dev/lms/tickets/5e80fcb6-3f8e-480c-945b-30a5359eb40e/JNmYjkVr3WOjsrbu.png";
            let fleets = [];
            const cardsContainer= document.getElementById("cardsContainer");
            const regNoInput = document.getElementById("regNo");
            const CategoryInput = document.getElementById("category");
            const driverInput = document.getElementById("driver");
            const availInput = document.getElementById("isAvailable");
            const filterCategory = document.getElementById("filterCategory");
            const filterAvail = document.getElementById("filterAvail");
            document.getElementById("addFleet").addEventListener("click", function()){
                const regNo = regNoInput.value.trim();
                const category = CategoryInput.value;
                const driver = driverInput.value.trim();
                const Available = availInput.value;
                if(!regNo || !category || !driver){
                    alert("Please fill all requiered fields");
                    return;
                }
                const newFleet = {
                    id:Date.now(),
                    regNo,
                    category,
                    driver,
                    Available,
                };
                fleets.push(newFleet);
                clearForm();
                render();

            };
            function clearForm(){
                regNoInput.value="";
                CategoryInput.value ="";
                driverInput.value="";
                availInput.value = "available";
            }
            function render(){
                cardsContainer.innerHTML = "";
                const catFilter = filterCategory.value;
                const avFilter = filterAvail.value;
                const filtered = fleets.filter((f) => {
                    let ok = true;
                    if(catFilter !== "All") ok = ok && f.category === catFilter;
                    if(avFilter !== "All") ok = ok && f.Available === avFilter;
                    return ok;

                });
                filtered.forEach((fleet) => {
                    const card = document.createElement("div");
                    card.innerHTML='
                    <img src="${VEHICLE_IMG}" alt="vehicle"/>
                    <p><b>Reg no:</b> ${fleet.regNo}</p>
                    <p><b>Category:</b>$(fleet.Category)</p>
                    <p><b>driver:</b> $(fleet.driver)</p>
                    ';
                    const updateBtn = document.createElement("button");
                    updateBtn.textContent = "Update driver";
                    updateBtn.addEventListener("click", function()){
                        const newName = prompt("Enter new sriver name");
                        if(!newName === null)return;
                        if(!newName.trim()){
                            alert("driver name cannot be empty");
                            return;

                        }
                        fleet.driver = newName.trim();
                        render();
                    });
                    const availBtn = document.childElement("button");
                    availBtn.textContent = "Delete Vehicle";
                    delBtn.textContent = "Delete Vehicle";
                    const ol = confirm("are you sure to delete this vehicle?");
                    

                }
            }


        </script>
    </body>
</html>